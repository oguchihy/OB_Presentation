"0","#| context: setup"
"0","library(shiny)"
"0","library(survival)"
"0","library(survminer)"
"0","library(ggplot2)"
"0","library(myRFunctions)  # Assuming this contains ggforest3"
"0","library(nnet)  # for multinom()"
"0","library(dplyr)"
"0","library(randomForest)"
"0",""
"0","# Load data"
"0","ob_data_reg <- readRDS(""Working OB Dataset.RDS"")"
"0","ob_data_reg <- ob_data_reg %>%"
"0","  dplyr::select(zip, age, grav, para, diff_grav_para, lbr_type_cnsldt, membrane_rupture, gender, intrapartal_events, "
"0","                event, time, presentation_cnsldt, conditions_cnsldt, uds_age, hghRsk, del_method_cnsldt, cluster) %>%"
"0","  mutate(cluster = if_else(cluster == 2, 1, 0)) %>%"
"0","  filter(zip %in% c(""93905"", ""93906"", ""93927"", ""93930"", ""95012""))"
"0",""
"0","# Convert adm_to_del_tm_cat to a factor"
"0","ob_data_reg <- ob_data_reg %>%"
"0","  mutate(duration_cat = case_when("
"0","    time < 12 ~ ""Under 12 hours"","
"0","    time >= 12 & time < 24 ~ ""13-24 hours"","
"0","    time >= 24 & time < 48 ~ ""25-48 hours"","
"0","    time >= 48 ~ ""Over 48 hours"""
"0","  ))"
"0",""
"0","ob_data_chr <- readRDS(""Working OB Dataset.RDS"")"
"0","ob_data_fctr <- readRDS(""All Factored Complete Ready OB Dataset for Analytics.RDS"")"
"0",""
"0","ob_data_fct <- ob_data_fctr %>%"
"0","  dplyr::select(zip, age, grav, para, diff_grav_para, lbr_type_cnsldt, membrane_rupture, gender, intrapartal_events, "
"0","                event, time, presentation_cnsldt, conditions_cnsldt, uds_age, hghRsk, del_method_cnsldt, cluster) %>%"
"0","  mutate(zip = as.character(zip)) %>%"
"0","  filter(zip %in% c(""93905"", ""93906"", ""93927"", ""93930"", ""95012"")) %>%"
"0","  mutate(zip = as.factor(zip), cluster = if_else(cluster == 2, 1, 0))"
"0",""
"0","ob_data_fct <- ob_data_fct %>%"
"0","  mutate(duration_cat = factor(case_when("
"0","    time < 12 ~ ""Under 12 hours"","
"0","    time >= 12 & time < 24 ~ ""13-24 hours"","
"0","    time >= 24 & time < 48 ~ ""25-48 hours"","
"0","    time >= 48 ~ ""Over 48 hours"""
"0","  )))"
"0",""
